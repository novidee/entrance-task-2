class CircularRange{constructor({onChange:e}){this.node=document.querySelector(".circular-range"),this.current=this.node.querySelector(".circular-scale__current"),this.arrow=this.node.querySelector(".circular-range__arrow"),this.valueNode=this.node.querySelector(".circular-range__value"),this.radius=99.5,this.circumference=2*this.radius*Math.PI,this.startAngle=60,this.endAngle=300,this.MIN_MANIPULATION_RADIUS=40,this.start=12,this.min=-10,this.max=30,this.onChange=e,this.handleChange=throttle(this.handleChange.bind(this),50),this.handleDown=this.handleDown.bind(this),this.handleUp=this.handleUp.bind(this)}getCenter(){const{left:e,top:t,width:i,height:n}=this.node.getBoundingClientRect();return{x:e+i/2,y:t+n/2}}getAngle(e,t){const{startAngle:i}=this;let n=-Math.atan2(e.y-t.y,t.x-e.x)/(Math.PI/180);return n<0&&(n+=360),n+i>360&&(n-=360),n+i}getXY(e){let t=e;return-1!==e.type.indexOf("touch")&&(t=(e.originalEvent||e).changedTouches[0]),{x:t.pageX,y:t.pageY}}getDistance(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}init(){this.subscribeListeners(),this.create()}subscribeListeners(){const{node:e}=this;e.addEventListener("click",this.handleChange),addMultipleEventListeners(e,["mousedown","touchstart"],this.handleDown),addMultipleEventListeners(document,["mouseup","touchend","touchcancel"],this.handleUp)}create(){const{start:e,min:t,max:i}=this,n=i-t,s=e/n*360;this.render({angle:s,activeRatio:e/n,resultValue:e}),this.onChange(e)}render({angle:e,activeRatio:t,resultValue:i}){const{circumference:n,startAngle:s,valueNode:r}=this;this.current.style.strokeDashoffset=n*t,this.arrow.style.transform=`scale(-1, -1) rotate(${e+s/2}deg)`,r.innerHTML=addSign(i)}getResultValue(e){const{endAngle:t,min:i,max:n}=this,s=(n-i)*(e/t);return Math.round(i+s)}handleChange(e){e.preventDefault();const{endAngle:t,MIN_MANIPULATION_RADIUS:i}=this,n=this.getCenter(),s=this.getXY(e),r=Math.round(this.getAngle(s,n)),o=this.getDistance(n,s);if(r>t||o<i)return;const a=this.getResultValue(r);this.render({angle:r,activeRatio:r/360,resultValue:a}),this.onChange(a)}preventDefault(e){e.preventDefault()}handleDown(){addMultipleEventListeners(document,["mousemove","touchmove"],this.handleChange),this.node.addEventListener("touchmove",this.preventDefault,{capture:!0,passive:!1})}handleUp(){removeMultipleEventListeners(document,["mousemove","touchmove"],this.handleChange),this.node.removeEventListener("touchmove",this.preventDefault)}}const temperatureIndicator=document.querySelector(".temperature-indicator__value"),circularRange=new CircularRange({onChange:e=>temperatureIndicator.innerHTML=addSign(e)});circularRange.init();const filter=document.querySelector(".filter__current"),filtersList=document.querySelector(".filter__list");function onFilterPopupOpen(){filtersList.classList.toggle("filter__list--opened")}filter.addEventListener("click",onFilterPopupOpen);const toggler=document.querySelector(".main-nav__toggler"),nav=document.querySelector(".main-nav");function onMenuToggle(){nav.classList.toggle("main-nav--opened")}toggler.addEventListener("click",onMenuToggle);const layout=document.querySelector(".layout"),footerButtons=document.querySelectorAll(".footer-modal__btn"),modals={heat:document.querySelector(".modal[data-type=heat]"),temperature:document.querySelector(".modal[data-type=temperature]"),lighting:document.querySelector(".modal[data-type=lighting]")};function onModalClose(e){e.target===this&&onModalToggle(e,this.closest(".modal").dataset.type)}function onModalToggle(e,t){e.preventDefault();modals[t].classList.contains("modal--hidden")&&animateModal(e),document.body.classList.toggle("no-overflow"),modals[t].classList.toggle("modal--hidden"),modals[t].classList.toggle("modal--opened"),layout.classList.toggle("layout--with-modal")}function animateModal(e){const{top:t,left:i,width:n,height:s}=e.target.closest(".card").getBoundingClientRect(),{clientWidth:r,clientHeight:o}=document.documentElement,a=i+n/2-r/2,l=t+s/2-o/2;document.documentElement.style.setProperty("--modal-start-transform",`translate(${a}px, ${l}px) scale(0.2)`)}Object.keys(modals).forEach(e=>modals[e].addEventListener("click",onModalClose)),Array.from(footerButtons).forEach(e=>e.addEventListener("click",onModalClose)),document.addEventListener("click",e=>{const t=e.target.closest(".card");if(t&&!isSomeSliderMoving){onModalToggle(e,t.dataset.type)}});class RangeSlider{constructor({container:e,start:t,min:i=0,max:n=100,onChange:s}){this.container=document.querySelector(e),this.value=t,this.min=i,this.max=n,this.changeHandler=s,this.onChange=this.onChange.bind(this)}build(e){const{container:t,value:i,min:n,max:s}=this;noUiSlider.create(t,{start:i,direction:e?"rtl":"ltr",step:1,range:{min:n,max:s},orientation:e?"vertical":"horizontal"}),t.noUiSlider.on("update",this.onChange)}init(){this.build("tablet-down"===getCurrentMediaArea()),this.resizeHandle()}rebuild(e){const{container:t}=this;t.noUiSlider.destroy(),this.build(e)}resizeHandle(){listenWindowResize(50,({mediaArea:e,mediaAreaChanged:t})=>{t&&this.rebuild("tablet-down"===e)})}onChange(e,t){const{changeHandler:i,min:n,max:s,container:r}=this,o=Number(e[t]);this.value=o,"function"==typeof i&&i(o);const a=(e,t)=>{Number.isFinite(t)&&r.setAttribute(e,addSign(t))};a("data-min",n),a("data-max",s)}}const temperatureNode=document.querySelector(".temperature-indicator--js .temperature-indicator__value"),temperatureRange=new RangeSlider({container:"#temperature-range",start:23,min:-10,max:30,onChange:e=>temperatureNode.innerHTML=addSign(e)});temperatureRange.init();const lightingRange=new RangeSlider({container:"#lighting-range",start:30});lightingRange.init();const MEDIA_AREA={tabletDown:"tablet-down",tabletUp:"tablet-up",desktopHDUp:"desktop-hd-up"},DEFAULT_CONFIG={nav:!1,mouseDrag:!0,loop:!1,speed:600,swipeAngle:!1},prevArrow='<img class="tns-controls-prev" src="images/arrow-left.svg" alt=""/>',nextArrow='<img class="tns-controls-next" src="images/arrow-left.svg" alt=""/>';class BaseSlider{toggleListeners(e){this.sliderInfo.events[e]("dragMove",preventClick),this.sliderInfo.events[e]("touchMove",preventClick),this.sliderInfo.events[e]("dragEnd",admitClick),this.sliderInfo.events[e]("touchEnd",admitClick)}subscribe(){this.toggleListeners("on")}unsubscribe(){this.toggleListeners("off")}}class ScenariosSlider extends BaseSlider{constructor(){super(),this.options=Object.assign({},DEFAULT_CONFIG,{container:".scenarios__list",fixedWidth:200,gutter:15,controlsText:[prevArrow,nextArrow],slideBy:"page",responsive:{320:{controls:!1},768:{controls:!0,gutter:0,items:1,fixedWidth:429},1280:{fixedWidth:644}}}),this.CARDS_PER_SLIDE={[MEDIA_AREA.tabletDown]:1,[MEDIA_AREA.tabletUp]:6,[MEDIA_AREA.desktopHDUp]:9},this.items=Array.from(document.querySelectorAll(".scenarios__item"))}build(){this.sliderInfo=tns(this.options),super.subscribe()}destroy(){super.unsubscribe(),this.sliderInfo.destroy()}create(){this.prepareMarkup(this.CARDS_PER_SLIDE[getCurrentMediaArea()]),this.build(),listenWindowResize(50,e=>this.update(e))}update({mediaArea:e,mediaAreaChanged:t}){t&&(this.destroy(),this.prepareMarkup(this.CARDS_PER_SLIDE[e]),this.build())}prepareMarkup(e){const t=document.querySelector(".scenarios__list"),i=this.items.slice(),n=[],s=i.length/e;for(let t=0;t<s;t++)n[t]=i.splice(0,e);const r=n.map(e=>{return`<li class="scenarios__item">${1===e.length?e[0].innerHTML:`<ul class="slide-list">${e.map(e=>`<li class="slide-list__item">${e.innerHTML}</li>`).join("")}</ul>`}</li>`}).join("");t.innerHTML=r}}const scenariosSlider=new ScenariosSlider;scenariosSlider.create();class InfoDevicesSlider extends BaseSlider{constructor(){super();this.options={horizontal:Object.assign({},DEFAULT_CONFIG,{container:".info__devices-list",controls:!1,edgePadding:20,fixedWidth:220}),vertical:Object.assign({},DEFAULT_CONFIG,{container:".info__devices-list",controls:!1,items:2,gutter:15,axis:"vertical",edgePadding:20})}}build(e){this.sliderInfo=tns(this.options[e]),this.subscribe()}subscribe(){super.subscribe(),this.sliderInfo.events.on("dragEnd",this.toggleArrow),this.sliderInfo.events.on("touchEnd",this.toggleArrow)}unsubscribe(){super.unsubscribe(),this.sliderInfo.events.off("dragEnd",this.toggleArrow),this.sliderInfo.events.off("touchEnd",this.toggleArrow)}destroy(){this.unsubscribe(),this.sliderInfo.destroy()}rebuild({mediaArea:e,mediaAreaChanged:t}){t&&(this.destroy(),this.build(e===MEDIA_AREA.desktopHDUp?"vertical":"horizontal"))}create(){this.build(getCurrentMediaArea()===MEDIA_AREA.desktopHDUp?"vertical":"horizontal"),listenWindowResize(50,e=>this.rebuild(e))}toggleArrow(e){const t=document.querySelector(".info__list-arrow");"translate3d(0px, 0px, 0px)"!==e.container.style.transform?t.classList.add("info__list-arrow--hidden"):t.classList.remove("info__list-arrow--hidden")}}const infoDevicesSlider=new InfoDevicesSlider;infoDevicesSlider.create();let isSomeSliderMoving=!1;class DevicesSlider extends BaseSlider{constructor(){super(),this.options=Object.assign({},DEFAULT_CONFIG,{container:".devices__list",fixedWidth:200,gutter:15,controlsText:[prevArrow,nextArrow],slideBy:"page",responsive:{320:{controls:!1},768:{controls:!0}}})}create(){this.sliderInfo=tns(this.options),super.subscribe()}}class ModalFilterSlider{constructor(e){this.options=Object.assign({},DEFAULT_CONFIG,{container:e,controls:!1,autoWidth:!0,gutter:10,items:5})}create(){this.sliderInfo=tns(this.options)}}const devicesSlider=new DevicesSlider;devicesSlider.create();const modalFilters=Array.from(document.querySelectorAll(".modal__filter .filter__list"));function preventClick(){isSomeSliderMoving=!0}function admitClick(){isSomeSliderMoving=!1}function getCurrentMediaArea(){return getComputedStyle(document.querySelector(":root")).getPropertyValue("--media").trim()}function debounce(e,t){let i=null;return function(...n){i&&clearTimeout(i),i=setTimeout(()=>{e.apply(this,n),i=null},t)}}function throttle(e,t){let i=!1,n=null,s=null;return function r(){if(i)return n=arguments,void(s=this);e.apply(this,arguments),i=!0,setTimeout(function(){i=!1,n&&(r.apply(s,n),n=s=null)},t)}}function listenWindowResize(e,t){let i=getCurrentMediaArea();window.addEventListener("resize",debounce(()=>{const e=getCurrentMediaArea(),n=e!==i;i=n?e:i,t({mediaArea:e,mediaAreaChanged:n})},e))}function addMultipleEventListeners(e,t,i,n){t.forEach(t=>{e.addEventListener(t,i,n)})}function removeMultipleEventListeners(e,t,i,n){t.forEach(t=>{e.removeEventListener(t,i,n)})}function addSign(e){return 0===e?0:e>0?`+${e}`:`−${Math.abs(e)}`}modalFilters.map(e=>new ModalFilterSlider(e)).forEach(e=>e.create());