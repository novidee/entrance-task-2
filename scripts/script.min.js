const circularScale=document.querySelector(".circular-range");function handleMove(e){e.preventDefault();const t={x:e.pageX,y:e.pageY},{left:i,top:n,width:r,height:o}=circularScale.getBoundingClientRect(),s={x:i+r/2,y:n+o/2};console.log("angle",getAngle(t,s))}function getAngle(e,t){let i=-Math.atan2(e.y-t.y,t.x-e.x)/(Math.PI/180);return i<0&&(i+=360),i+60>360&&(i-=360),i+60}circularScale.addEventListener("mousemove",handleMove);const filter=document.querySelector(".filter__current"),filtersList=document.querySelector(".filter__list");function onFilterPopupOpen(){filtersList.classList.toggle("filter__list--opened")}filter.addEventListener("click",onFilterPopupOpen);const toggler=document.querySelector(".main-nav__toggler"),nav=document.querySelector(".main-nav");function onMenuToggle(){nav.classList.toggle("main-nav--opened")}toggler.addEventListener("click",onMenuToggle);const layout=document.querySelector(".layout"),footerButtons=document.querySelectorAll(".footer-modal__btn"),modals={heat:document.querySelector(".modal[data-type=heat]"),temperature:document.querySelector(".modal[data-type=temperature]"),lighting:document.querySelector(".modal[data-type=lighting]")};function onModalClose(e){e.target===this&&onModalToggle(e,this.closest(".modal").dataset.type)}function onModalToggle(e,t){e.preventDefault();const{clientX:i,clientY:n,offsetX:r,offsetY:o}=e,s=i-r,a=n-o,l=modals[t].classList.contains("modal--hidden");l&&document.documentElement.style.setProperty("--start-point",`translate(${s}px, ${a}px) scale(0.2)`),document.body.style.overflow=l?"hidden":"auto",modals[t].classList.toggle("modal--hidden"),modals[t].classList.toggle("modal--opened"),layout.classList.toggle("layout--with-modal")}Object.keys(modals).forEach(e=>modals[e].addEventListener("click",onModalClose)),Array.from(footerButtons).forEach(e=>e.addEventListener("click",onModalClose)),document.addEventListener("click",e=>{const t=e.target.closest(".card");if(t&&!isSomeSliderMoving){onModalToggle(e,t.dataset.type)}});class RangeSlider{constructor({container:e,onChange:t,min:i,max:n}){this.workedContainer=document.querySelector(e),this.clonedContainer=this.workedContainer.cloneNode(!0),this.value=0,this.min=i,this.max=n,this.onChange=t,this.onDrag=this.onDrag.bind(this)}onDrag(e){const{min:t=0,max:i=100,onChange:n}=this,r=Math.round(e/100*(i-t)+t);"function"==typeof n&&n(r)}build(e){rangeSlider(this.workedContainer,{value:0,vertical:e,drag:this.onDrag}),this.writeMarkup()}writeMarkup(){const{workedContainer:e,min:t,max:i}=this,n=e.querySelector(".range-slider-track"),r=(e,t)=>{Number.isFinite(t)&&n.setAttribute(e,t>0?`+${t}`:`âˆ’${Math.abs(t)}`)};r("data-min",t),r("data-max",i)}init(){this.build("tablet-down"===getCurrentMediaArea()),this.subscribeListeners()}subscribeListeners(){listenWindowResize(50,({mediaArea:e,mediaAreaChanged:t})=>{t&&this.rebuild("tablet-down"===e)})}rebuild(e){const t=this.workedContainer.parentNode;t.removeChild(this.workedContainer),this.workedContainer=this.clonedContainer.cloneNode(!0),t.appendChild(this.workedContainer),this.build(e)}}const lightingRange=new RangeSlider({container:"#lighting-range"});lightingRange.init();const temperatureNode=document.querySelector(".temperature-indicator--js .temperature-indicator__value"),temperatureRange=new RangeSlider({container:"#temperature-range",onChange:onTemperatureChange,min:-10,max:30});function onTemperatureChange(e){temperatureNode.innerHTML=`${e>0?`+${e}`:e}`}temperatureRange.init();const MEDIA_AREA={tabletDown:"tablet-down",tabletUp:"tablet-up",desktopHDUp:"desktop-hd-up"},DEFAULT_CONFIG={nav:!1,mouseDrag:!0,loop:!1,speed:600,swipeAngle:!1},prevArrow="<img class='tns-controls-prev' src='images/arrow-left.svg' alt=''/>",nextArrow="<img class='tns-controls-next' src='images/arrow-left.svg' alt=''/>";class BaseSlider{toggleListeners(e){this.sliderInfo.events[e]("dragMove",preventClick),this.sliderInfo.events[e]("touchMove",preventClick),this.sliderInfo.events[e]("dragEnd",admitClick),this.sliderInfo.events[e]("touchEnd",admitClick)}subscribe(){this.toggleListeners("on")}unsubscribe(){this.toggleListeners("off")}}class ScenariosSlider extends BaseSlider{constructor(){super(),this.options=Object.assign({},DEFAULT_CONFIG,{container:".scenarios__list",fixedWidth:200,gutter:15,controlsText:[prevArrow,nextArrow],slideBy:"page",responsive:{320:{controls:!1},768:{controls:!0,gutter:0,items:1,fixedWidth:429},1280:{fixedWidth:644}}}),this.CARDS_PER_SLIDE={[MEDIA_AREA.tabletDown]:1,[MEDIA_AREA.tabletUp]:6,[MEDIA_AREA.desktopHDUp]:9},this.items=Array.from(document.querySelectorAll(".scenarios__item"))}build(){this.sliderInfo=tns(this.options),super.subscribe()}destroy(){super.unsubscribe(),this.sliderInfo.destroy()}create(){this.prepareMarkup(this.CARDS_PER_SLIDE[getCurrentMediaArea()]),this.build(),listenWindowResize(50,e=>this.update(e))}update({mediaArea:e,mediaAreaChanged:t}){t&&(this.destroy(),this.prepareMarkup(this.CARDS_PER_SLIDE[e]),this.build())}prepareMarkup(e){const t=document.querySelector(".scenarios__list"),i=this.items.slice(),n=[],r=i.length/e;for(let t=0;t<r;t++)n[t]=i.splice(0,e);const o=n.map(e=>{return`<li class="scenarios__item">${1===e.length?e[0].innerHTML:`<ul class="slide-list">${e.map(e=>`<li class="slide-list__item">${e.innerHTML}</li>`).join("")}</ul>`}</li>`}).join("");t.innerHTML=o}}const scenariosSlider=new ScenariosSlider;scenariosSlider.create();class InfoDevicesSlider extends BaseSlider{constructor(){super();this.options={horizontal:Object.assign({},DEFAULT_CONFIG,{container:".info__devices-list",controls:!1,edgePadding:20,fixedWidth:220}),vertical:Object.assign({},DEFAULT_CONFIG,{container:".info__devices-list",controls:!1,items:2,gutter:15,axis:"vertical",edgePadding:20})}}build(e){this.sliderInfo=tns(this.options[e]),super.subscribe()}destroy(){super.unsubscribe(),this.sliderInfo.destroy()}rebuild({mediaArea:e,mediaAreaChanged:t}){t&&(this.destroy(),this.build(e===MEDIA_AREA.desktopHDUp?"vertical":"horizontal"))}create(){this.build(getCurrentMediaArea()===MEDIA_AREA.desktopHDUp?"vertical":"horizontal"),listenWindowResize(50,e=>this.rebuild(e))}}const infoDevicesSlider=new InfoDevicesSlider;infoDevicesSlider.create();let isSomeSliderMoving=!1;class DevicesSlider extends BaseSlider{constructor(){super(),this.options=Object.assign({},DEFAULT_CONFIG,{container:".devices__list",fixedWidth:200,gutter:15,controlsText:[prevArrow,nextArrow],slideBy:"page",responsive:{320:{controls:!1},768:{controls:!0}}})}create(){this.sliderInfo=tns(this.options),super.subscribe()}}const devicesSlider=new DevicesSlider;function preventClick(){isSomeSliderMoving=!0}function admitClick(){isSomeSliderMoving=!1}function debounce(e,t){let i=null;return function(...n){i&&clearTimeout(i),i=setTimeout(()=>{e.apply(this,n),i=null},t)}}function getCurrentMediaArea(){return getComputedStyle(document.querySelector(":root")).getPropertyValue("--media").trim()}function listenWindowResize(e,t){let i=getCurrentMediaArea();window.addEventListener("resize",debounce(()=>{const e=getCurrentMediaArea(),n=e!==i;i=n?e:i,t({mediaArea:e,mediaAreaChanged:n})},e))}devicesSlider.create();